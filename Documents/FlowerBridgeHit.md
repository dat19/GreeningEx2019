# 花の橋の当たり判定
当初は、個別のFlowerオブジェクトにSphereColliderを設定して、CharacterControllerに任せていたが、以下のような問題が発生した。

- 岩と鑑賞して、岩が動かなくなったり、Zをずらしたりした
- プレイヤーが埋まる場合があった
- きのことの干渉も考えられる

アーチ状の状態のため、特に岩との干渉が大きく、影響範囲も大きいことから、岩は花の橋を渡れない仕様に変更することにする。また、プレイヤーが何らかの都合で埋まるとフリーズになってしまう。


## 方法検討
### 方法1 トリガーに変更
- Moveを改造して、上に乗る処理を入れる
- メリット 当たり判定の構造がシンプル
- デメリット 実装が手間

### 方法2 花の当たり判定を分ける
- 対プレイヤーのみの判定を入れる
  - 対プレイヤーはコライダー。PlayerCollider
  - 花として揺らす場合、別にtriggerを設定
- 花の判定
  - プレイヤーからは足場とみなす
  - 他のオブジェクトとは接触しない
- プレイヤーの足場のチェック時に、花の当たり判定レイヤーを混ぜる
- メリット　実装が楽
- デメリット　プレイヤーが埋まる現象を解決できない
  - 埋まった場合の判定をおこない、修正する
  - Stayの時、高さの差を調べて、一定以上なら上へ、違えば判定を無くす

### 検討
方法2が実装的には楽で、プレイヤーの基本的な動きへの影響は少ない。ただし、プレイヤーが埋まった時の対処が正しくできるかが問題なので、最初に検証する必要がある。

## 埋まった時の検証
空中で埋まった時の状態を作っておいて、再現テストを行う。

- Moveの戻り値でBelowが返ってくる
- ただし、相手は分からないので、この際に埋まっている相手を検出する必要がある
- 埋まっていると見なせる範囲をCastでチェックして、その範囲にコライダーを一定時間無効にするスクリプトを設定
